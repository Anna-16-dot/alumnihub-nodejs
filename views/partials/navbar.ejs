<% if (isLoggedIn) { %>
<!-- Professional Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top professional-navbar">
    <div class="container-fluid px-3">
        <a class="navbar-brand d-flex align-items-center" href="/dashboard">
            <div class="brand-logo">
                <i class="bi bi-mortarboard-fill"></i>
            </div>
            <div class="brand-text">
                <span class="brand-name">VCET Alumni</span>
                <span class="brand-tagline">Connect & Grow</span>
            </div>
        </a>
        
        <div class="navbar-actions d-flex align-items-center gap-2">
            <div class="notification-btn-wrapper">
                <a href="/chat" class="chat-btn" title="Messages">
                    <i class="bi bi-chat-dots-fill"></i>
                    <span class="chat-badge" id="chatBadge" style="display: none;">0</span>
                </a>
            </div>
            <div class="notification-btn-wrapper">
                <button class="notification-btn" onclick="toggleNotifications()" title="Notifications">
                    <i class="bi bi-bell-fill"></i>
                    <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                </button>
                <div class="notification-dropdown" id="notificationDropdown">
                    <div class="notification-header">
                        <h6><i class="bi bi-bell-fill me-2"></i>Notifications</h6>
                        <button class="mark-all-read-btn" onclick="markAllAsRead()">
                            <i class="bi bi-check-all"></i>
                        </button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <div class="notification-loading">
                            <div class="spinner-border spinner-border-sm text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <a href="/profile/<%= user.id %>" class="profile-btn" title="Profile">
                <% if (user.profile_picture) { %>
                    <img src="/<%= user.profile_picture %>" alt="Profile">
                <% } else { %>
                    <div class="profile-avatar"><%= user.name.charAt(0).toUpperCase() %></div>
                <% } %>
            </a>
            <a href="/auth/logout" class="logout-btn" title="Logout">
                <i class="bi bi-power"></i>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#mainMenu">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </div>
</nav>

<!-- Professional Offcanvas Menu -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="mainMenu">
    <div class="offcanvas-header professional-menu-header">
        <div class="menu-user-profile">
            <% if (user.profile_picture) { %>
                <img src="/<%= user.profile_picture %>" alt="Profile" class="menu-profile-pic">
            <% } else { %>
                <div class="menu-profile-avatar"><%= user.name.charAt(0).toUpperCase() %></div>
            <% } %>
            <div class="menu-user-info">
                <h6 class="mb-0"><%= user.name %></h6>
                <small class="text-white-50"><%= user.email %></small>
            </div>
        </div>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body p-0">
        <div class="menu-section">
            <div class="menu-section-title">Main Menu</div>
            <a href="/dashboard" class="menu-item">
                <div class="menu-item-icon"><i class="bi bi-speedometer2"></i></div>
                <div class="menu-item-content">
                    <div class="menu-item-title">Dashboard</div>
                    <div class="menu-item-subtitle">Home & Overview</div>
                </div>
                <i class="bi bi-chevron-right menu-item-arrow"></i>
            </a>
            <a href="/profile/<%= user.id %>" class="menu-item">
                <div class="menu-item-icon"><i class="bi bi-person-circle"></i></div>
                <div class="menu-item-content">
                    <div class="menu-item-title">My Profile</div>
                    <div class="menu-item-subtitle">Edit & View</div>
                </div>
                <i class="bi bi-chevron-right menu-item-arrow"></i>
            </a>
            <a href="/directory" class="menu-item">
                <div class="menu-item-icon"><i class="bi bi-people-fill"></i></div>
                <div class="menu-item-content">
                    <div class="menu-item-title">Alumni Directory</div>
                    <div class="menu-item-subtitle">Browse Members</div>
                </div>
                <i class="bi bi-chevron-right menu-item-arrow"></i>
            </a>
            <a href="/newsfeed" class="menu-item">
                <div class="menu-item-icon"><i class="bi bi-rss-fill"></i></div>
                <div class="menu-item-content">
                    <div class="menu-item-title">Newsfeed</div>
                    <div class="menu-item-subtitle">Latest Updates</div>
                </div>
                <i class="bi bi-chevron-right menu-item-arrow"></i>
            </a>
            <a href="/chat" class="menu-item">
                <div class="menu-item-icon"><i class="bi bi-chat-dots-fill"></i></div>
                <div class="menu-item-content">
                    <div class="menu-item-title">Messages</div>
                    <div class="menu-item-subtitle">Chat with Alumni</div>
                </div>
                <i class="bi bi-chevron-right menu-item-arrow"></i>
            </a>
            <a href="/jobs" class="menu-item">
                <div class="menu-item-icon"><i class="bi bi-briefcase-fill"></i></div>
                <div class="menu-item-content">
                    <div class="menu-item-title">Job Opportunities</div>
                    <div class="menu-item-subtitle">Career Portal</div>
                </div>
                <i class="bi bi-chevron-right menu-item-arrow"></i>
            </a>
        </div>
        <% if (user.role === 'admin') { %>
        <div class="menu-section">
            <div class="menu-section-title">Administration</div>
            <a href="/admin" class="menu-item menu-item-admin">
                <div class="menu-item-icon"><i class="bi bi-gear-fill"></i></div>
                <div class="menu-item-content">
                    <div class="menu-item-title">Admin Panel</div>
                    <div class="menu-item-subtitle">System Settings</div>
                </div>
                <i class="bi bi-chevron-right menu-item-arrow"></i>
            </a>
            <a href="/admin/users" class="menu-item menu-item-admin">
                <div class="menu-item-icon"><i class="bi bi-people-fill"></i></div>
                <div class="menu-item-content">
                    <div class="menu-item-title">Manage Users</div>
                    <div class="menu-item-subtitle">User Management</div>
                </div>
                <i class="bi bi-chevron-right menu-item-arrow"></i>
            </a>
        </div>
        <% } %>
        <div class="menu-footer">
            <a href="/auth/logout" class="menu-logout-btn">
                <i class="bi bi-power me-2"></i>
                <span>Logout</span>
            </a>
        </div>
    </div>
</div>
<% } %>
